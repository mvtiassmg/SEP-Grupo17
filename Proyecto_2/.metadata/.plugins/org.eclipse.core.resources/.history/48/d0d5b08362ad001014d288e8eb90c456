
#include "xparameters.h"
#include "xgpio.h"
#include "sleep.h"
#include <stdint.h>

/* LEDs en axi_gpio_1, canal 1 (OUT [3:0]) */
#define GPIO_LED_DEV_ID   XPAR_AXI_GPIO_1_DEVICE_ID
#define LED_CH            1

/* periodo de parpadeo */
#define BLINK_MS          250   // 250 ms ON, 250 ms OFF

int main(void)
{
    XGpio gpio_led;
    XGpio_Initialize(&gpio_led, GPIO_LED_DEV_ID);

    /* 0 = salida, 1 = entrada */
    XGpio_SetDataDirection(&gpio_led, LED_CH, 0x00000000u); // CH1 como salida

    while (1) {
        /* ON (todos) */
        XGpio_DiscreteWrite(&gpio_led, LED_CH, 0xF);
        usleep(BLINK_MS * 1000);

        /* OFF (todos) */
        XGpio_DiscreteWrite(&gpio_led, LED_CH, 0x0);
        usleep(BLINK_MS * 1000);
    }
}
