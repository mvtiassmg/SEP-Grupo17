#ifndef INTERRUPTS_H
#define INTERRUPTS_H

#include "xparameters.h"
#include "xscugic.h"
#include "xtmrctr.h"
#include "xgpio.h"
#include "xil_exception.h"

// --- IDs de Hardware (Ajusta si tus nombres en xparameters son distintos) ---
#define TIMER0_DEVICE_ID     XPAR_AXI_TIMER_0_DEVICE_ID
#define TIMER1_DEVICE_ID     XPAR_AXI_TIMER_1_DEVICE_ID
#define TIMER0_IRPT_ID       XPAR_FABRIC_AXI_TIMER_0_INTERRUPT_INTR
#define TIMER1_IRPT_ID       XPAR_FABRIC_AXI_TIMER_1_INTERRUPT_INTR

#define LIGHT_GPIO_DEVICE_ID XPAR_AXI_GPIO_1_DEVICE_ID
#define LIGHT_GPIO_IRQ_ID    XPAR_FABRIC_AXI_GPIO_1_IP2INTC_IRPT_INTR
#define LIGHT_GPIO_CHANNEL   1

#define TIMER_CLOCK_HZ       XPAR_AXI_TIMER_0_CLOCK_FREQ_HZ
#define TIMER0_PERIOD_SEC    0.001f // 1 ms (Música y Sensores)
#define TIMER1_PERIOD_SEC    0.050f // 50 ms (Lógica Juego)

// --- Variables globales compartidas ---
extern volatile int ao2_game_tick;
extern volatile int ao2_light_flag;
// extern volatile float ao2_gx, ao2_gy, ao2_gz; // Eliminadas para evitar conflicto SPI
// extern volatile int ao2_pot1, ao2_pot2;       // Eliminadas para evitar conflicto SPI
extern XGpio ALightGpio; // Necesario si main.c lee el GPIO directamente

// --- DEBUG: Contador de interrupciones ---
extern volatile u32 debug_isr_count;

// --- Prototipos ---
int AO2_InitInterruptSystem();

// Estas son las funciones que faltaban:
void AO2_EnableLightInterrupt(void);
void AO2_DisableLightInterrupt(void);

#endif
