#include "TempSensor.h"
#include "LCD_GUI.h" // Para los colores RED, BLUE, YELLOW, CYAN

// Declaración externa de tu función driver
extern int read_tmp();

// Umbrales en grados Celsius (Enteros)
// Ajustar según tu entorno y calibración
#define TEMP_COLD_THRESH 27
#define TEMP_HOT_THRESH  31

void TempSensor_init(TempSensor *ts)
{
    ts->current_temp = 25;
    ts->player_color = YELLOW;
}

void TempSensor_update(TempSensor *ts)
{
    ts->current_temp = read_tmp();

    if (ts->current_temp < TEMP_COLD_THRESH) {
        ts->player_color = CYAN; // Frío
    }
    else if (ts->current_temp > TEMP_HOT_THRESH) {
        ts->player_color = RED;  // Caliente
    }
    else {
        ts->player_color = YELLOW; // Normal
    }
}
